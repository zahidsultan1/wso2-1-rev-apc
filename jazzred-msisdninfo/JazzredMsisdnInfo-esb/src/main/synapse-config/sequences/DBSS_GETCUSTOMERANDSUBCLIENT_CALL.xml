<?xml version="1.0" encoding="UTF-8"?>
<sequence name="DBSS_GETCUSTOMERANDSUBCLIENT_CALL" xmlns="http://ws.apache.org/ns/synapse">
	<property name="INTERFACE_NAME" value="GETCUSTOMERANDSUBSCRIPTIONDETAILS"/>
	<property expression="fn:concat('https://bssapi.bss.jazz.com.pk/api/v1/subscriptions/',$ctx:msisdn,'?identifier-type=msisdn&amp;include=subscription-type,owner-customer')" name="RESOURCE_URI" xmlns:ns="http://org.apache.synapse/xsd"/>
	<property expression="$ctx:msisdn" name="MSISDN" xmlns:ns="http://org.apache.synapse/xsd"/>
	<property expression="$ctx:MSISDN" name="REQUEST" xmlns:ns="http://org.apache.synapse/xsd"/>
	<property expression="get-property('SYSTEM_DATE', 'yyyy-MM-dd HH:mm:ss.SSS')" name="REQUEST_TIME" scope="default" xmlns:ns="http://org.apache.synapse/xsd"/>
	<sequence key="ECARE_LOG_REQUEST"/>
	<header name="User-Agent" scope="transport" value="Apache-HttpClient/4.1.1 (java 1.5)"/>
	<property action="remove" name="Accept-Encoding" scope="transport"/>
	<property action="remove" name="Content-Encoding" scope="transport"/>
	<property expression="$ctx:msisdn" name="uri.var.msisdn" xmlns:ns="http://org.apache.synapse/xsd"/>
	<call>
		<endpoint key="DBSS_ECARECLIENTTEL_v1"/>
	</call>
	<property expression="$axis2:HTTP_SC" name="StatusCode" xmlns:ns="http://org.apache.synapse/xsd"/>
	<property expression="json-eval($.included[1].attributes.business-model-type)" name="subscriberType" scope="default" type="STRING"/>
	<property expression="json-eval($.included[1].attributes.brand)" name="Brand" scope="default" type="STRING"/>
	<property expression="json-eval($.included[1].attributes.code)" name="ServiceCode" scope="default" type="STRING"/>
	<property expression="json-eval($.data.attributes.status)" name="status" scope="default" type="STRING"/>
	<property name="uri.var.type" expression="$ctx:subscriberType" scope="default" type="STRING"/>
	<property name="uri.var.operator" expression="$ctx:Brand" scope="default" type="STRING"/>
	<property name="INTERFACE_NAME" value="GETCUSTOMERANDSUBSCRIPTIONDETAILS"/>
	<property name="JSON_RESPONSE" expression="fn:concat('subscriberType:',$ctx:subscriberType,' | Brand:',$ctx:Brand,' | ServiceCode:',$ctx:ServiceCode,' | status:',$ctx:status)" scope="default" type="STRING"/>
	<property expression="get-property('SYSTEM_DATE', 'yyyy-MM-dd HH:mm:ss.SSS')" name="RESPONSE_TIME" scope="default" xmlns:ns="http://org.apache.synapse/xsd"/>
	<property name="LOG_RESPONSE_STATUS" value="OK"/>
	<sequence key="ECARE_LOG_RESPONSE"/>
</sequence>
